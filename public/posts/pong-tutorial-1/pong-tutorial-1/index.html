<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  Pong Tutorial in Godot; Part 1 · Balooga.com
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="Luke Crook">
<meta name="description" content="(v0.1)

Table of Contents

Introduction
The Godot Graphics Pipeline
Install the Godot Engine
Design 
Create the Pong Project
Viewport

Classes and Class Inheritance


Text Label

Object Instantiation and Variables
Dynamic vs Static Typing


Frame Rate

Singletons


Game Loop

The SceneTree 
Variable Scope
Static, Instance, and Virtual Methods
Conditionals
Constants


Handling Player Input

Handling Input


Game Exit

Object Constructors and Destructors, Finalizers 


Information Hiding and Encapsulation

Alternative Implementation


Composition vs Inheritance
Conclusion

The Final Code


Advanced Concepts
Versions



  Introduction
  
    
    Link to heading
  

This is the first in a series of tutorials building up to a basic Pong clone implemented using the Godot engine. We will try to accomplish as much as we can in GDScript, which is the native scripting language of the engine, relying less on Godot&rsquo;s SceneTree editor and Property Inspector. These tools, while useful for experimentation, can make refactoring code, debugging, and writing unit tests more difficult; grepping over files in your project folder is much faster than having to inspect properties of the Nodes in the SceneTree, for example.">
<meta name="keywords" content="blog,developer,personal">



  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Pong Tutorial in Godot; Part 1">
  <meta name="twitter:description" content="(v0.1)
Table of Contents
Introduction The Godot Graphics Pipeline Install the Godot Engine Design Create the Pong Project Viewport Classes and Class Inheritance Text Label Object Instantiation and Variables Dynamic vs Static Typing Frame Rate Singletons Game Loop The SceneTree Variable Scope Static, Instance, and Virtual Methods Conditionals Constants Handling Player Input Handling Input Game Exit Object Constructors and Destructors, Finalizers Information Hiding and Encapsulation Alternative Implementation Composition vs Inheritance Conclusion The Final Code Advanced Concepts Versions Introduction Link to heading This is the first in a series of tutorials building up to a basic Pong clone implemented using the Godot engine. We will try to accomplish as much as we can in GDScript, which is the native scripting language of the engine, relying less on Godot’s SceneTree editor and Property Inspector. These tools, while useful for experimentation, can make refactoring code, debugging, and writing unit tests more difficult; grepping over files in your project folder is much faster than having to inspect properties of the Nodes in the SceneTree, for example.">

<meta property="og:url" content="https://www.balooga.com/posts/pong-tutorial-1/pong-tutorial-1/">
  <meta property="og:site_name" content="Balooga.com">
  <meta property="og:title" content="Pong Tutorial in Godot; Part 1">
  <meta property="og:description" content="(v0.1)
Table of Contents
Introduction The Godot Graphics Pipeline Install the Godot Engine Design Create the Pong Project Viewport Classes and Class Inheritance Text Label Object Instantiation and Variables Dynamic vs Static Typing Frame Rate Singletons Game Loop The SceneTree Variable Scope Static, Instance, and Virtual Methods Conditionals Constants Handling Player Input Handling Input Game Exit Object Constructors and Destructors, Finalizers Information Hiding and Encapsulation Alternative Implementation Composition vs Inheritance Conclusion The Final Code Advanced Concepts Versions Introduction Link to heading This is the first in a series of tutorials building up to a basic Pong clone implemented using the Godot engine. We will try to accomplish as much as we can in GDScript, which is the native scripting language of the engine, relying less on Godot’s SceneTree editor and Property Inspector. These tools, while useful for experimentation, can make refactoring code, debugging, and writing unit tests more difficult; grepping over files in your project folder is much faster than having to inspect properties of the Nodes in the SceneTree, for example.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-10-27T22:30:56-07:00">
    <meta property="article:modified_time" content="2024-10-27T22:30:56-07:00">




<link rel="canonical" href="https://www.balooga.com/posts/pong-tutorial-1/pong-tutorial-1/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.aa5ef26fa979d6793724ae2dbd71efa94fd16cb1c5c7db3b6651f21f9892a5fd.css" integrity="sha256-ql7yb6l51nk3JK4tvXHvqU/RbLHFx9s7ZlHyH5iSpf0=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css" integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="/img/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-auto">
  
<div class="float-container">
    <a id="dark-mode-toggle" class="colorscheme-toggle">
        <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
    </a>
</div>


  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="https://www.balooga.com/">
      Balooga.com
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://www.balooga.com/posts/pong-tutorial-1/pong-tutorial-1/">
              Pong Tutorial in Godot; Part 1
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2024-10-27T22:30:56-07:00">
                October 27, 2024
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              22-minute read
            </span>
          </div>
          
          
          
        </div>
      </header>

      <div class="post-content">
        
        <p>(v0.1)</p>
<!-- raw HTML omitted -->
<p><strong>Table of Contents</strong></p>
<ul>
<li><a href="#introduction" >Introduction</a></li>
<li><a href="#the-godot-graphics-pipeline" >The Godot Graphics Pipeline</a></li>
<li><a href="#install-the-godot-engine" >Install the Godot Engine</a></li>
<li><a href="#design" >Design </a></li>
<li><a href="#create-the-pong-project" >Create the Pong Project</a></li>
<li><a href="#viewport" >Viewport</a>
<ul>
<li><a href="#classes-and-class-inheritance" >Classes and Class Inheritance</a></li>
</ul>
</li>
<li><a href="#text-label" >Text Label</a>
<ul>
<li><a href="#object-instantiation-and-variables" >Object Instantiation and Variables</a></li>
<li><a href="#dynamic-vs-static-typing" >Dynamic vs Static Typing</a></li>
</ul>
</li>
<li><a href="#frame-rate" >Frame Rate</a>
<ul>
<li><a href="#singletons" >Singletons</a></li>
</ul>
</li>
<li><a href="#game-loop" >Game Loop</a>
<ul>
<li><a href="#the-scenetree" >The SceneTree </a></li>
<li><a href="#variable-scope" >Variable Scope</a></li>
<li><a href="#static-instance-and-virtual-methods" >Static, Instance, and Virtual Methods</a></li>
<li><a href="#conditionals" >Conditionals</a></li>
<li><a href="#constants" >Constants</a></li>
</ul>
</li>
<li><a href="#handling-player-input" >Handling Player Input</a>
<ul>
<li><a href="#handling-input" >Handling Input</a></li>
</ul>
</li>
<li><a href="#game-exit" >Game Exit</a>
<ul>
<li><a href="#object-constructors-and-destructors-finalizers" >Object Constructors and Destructors, Finalizers </a></li>
</ul>
</li>
<li><a href="#information-hiding-and-encapsulation" >Information Hiding and Encapsulation</a>
<ul>
<li><a href="#alternative-implementation" >Alternative Implementation</a></li>
</ul>
</li>
<li><a href="#composition-vs-inheritance" >Composition vs Inheritance</a></li>
<li><a href="#conclusion" >Conclusion</a>
<ul>
<li><a href="#the-final-code" >The Final Code</a></li>
</ul>
</li>
<li><a href="#advanced-concepts" >Advanced Concepts</a></li>
<li><a href="#versions" >Versions</a></li>
</ul>
<!-- raw HTML omitted -->
<h1 id="introduction">
  Introduction
  <a class="heading-link" href="#introduction">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>This is the first in a series of tutorials building up to a basic Pong clone implemented using the <a href="https://godotengine.org/"  class="external-link" target="_blank" rel="noopener">Godot engine</a>. We will try to accomplish as much as we can in <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/gdscript_basics.html"  class="external-link" target="_blank" rel="noopener">GDScript</a>, which is the native scripting language of the engine, relying less on Godot&rsquo;s SceneTree editor and Property Inspector. These tools, while useful for experimentation, can make refactoring code, debugging, and writing unit tests more difficult; <a href="https://en.wikipedia.org/wiki/Grep"  class="external-link" target="_blank" rel="noopener">grepping</a> over files in your project folder is much faster than having to inspect properties of the Nodes in the SceneTree, for example.</p>
<p><a href="https://en.wikipedia.org/wiki/Object-oriented_programming"  class="external-link" target="_blank" rel="noopener">OOP (Object-Oriented Programming)</a> is the driving paradigm in the design of <a href="https://docs.godotengine.org/en/stable/tutorials/best_practices/what_are_godot_classes.html"  class="external-link" target="_blank" rel="noopener">GDScript and the Godot engine</a>. You don&rsquo;t need to become an expert in Object Orientated programming to use the Godot engine or GDScript, but you should take the time to become somewhat proficient. This tutorial introduces some principles of OOP but OOP isn&rsquo;t covered in depth as this isn&rsquo;t a general programming tutorial.</p>
<p>We start by implementing something seemingly straightforward, displaying the <a href="https://en.wikipedia.org/wiki/Frame_rate"  class="external-link" target="_blank" rel="noopener">frame rate</a> (fps &ndash; frames-per-second). Why start with the frame rate instead of jumping in and creating the Pong clone? See <a href="https://www.balooga.com/posts/software-estimation/" title="Software Development Estimation" >Software Development Estimation</a> as to why.</p>
<p><img src="/posts/pong-tutorial-1/pong-execute.png" alt="Pong FPS Tutorial 1" title="Displaying the frame rate in Pong FPS Tutorial 1"></p>
<p>We begin with a high level description of how the Godot engine <a href="#the-godot-graphics-pipeline" >displays graphics to the screen</a>.</p>
<h1 id="the-godot-graphics-pipeline">
  The Godot Graphics Pipeline
  <a class="heading-link" href="#the-godot-graphics-pipeline">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>An object (Node) must be added to the Godot graphics pipeline to be rendered to the display. Nodes are visible in the Godot editor in the SceneTree hierarchy.</p>
<p><a href="https://docs.godotengine.org/en/stable/getting_started/step_by_step/nodes_and_scenes.html"  class="external-link" target="_blank" rel="noopener"><img src="./nodes-and-scenes.webp" alt="An example of a SceneTree, from the Godot documentation on Nodes and Scenes"></a></p>
<p>Pipeline components are described at a high level below;</p>
<ul>
<li>
<p>The <a href="https://docs.godotengine.org/en/stable/classes/class_renderingserver.html"  class="external-link" target="_blank" rel="noopener">RenderingServer</a> projects game objects (Nodes) onto a Viewport.</p>
</li>
<li>
<p>A <a href="https://docs.godotengine.org/en/stable/tutorials/rendering/viewports.html"  class="external-link" target="_blank" rel="noopener">Viewport</a> owns the surface that the RenderingServer draws to. The Viewport is itself a <a href="https://docs.godotengine.org/en/stable/classes/class_node.html"  class="external-link" target="_blank" rel="noopener">Node</a> in the SceneTree. The Viewport surface is what is displayed on your screen unless otherwise modified by a Camera Node in the SceneTree.</p>
</li>
<li>
<p>The <a href="https://docs.godotengine.org/en/stable/classes/class_scenetree.html"  class="external-link" target="_blank" rel="noopener">SceneTree</a> is a <a href="https://en.wikipedia.org/wiki/Scene_graph"  class="external-link" target="_blank" rel="noopener">Scene Graph</a> containing a hierarchy of Nodes, one of which is the Viewport. The SceneTree also manages the <a href="https://docs.godotengine.org/en/stable/classes/class_mainloop.html"  class="external-link" target="_blank" rel="noopener">MainLoop</a> (the game loop). As we will learn later, the MainLoop defines the virtual methods <code>_initialize()</code>, <code>_finalize()</code>, and <code>_process()</code> that we <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/overridable_functions.html"  class="external-link" target="_blank" rel="noopener">override</a> with our game logic.</p>
</li>
<li>
<p>A <a href="https://docs.godotengine.org/en/stable/classes/class_node.html"  class="external-link" target="_blank" rel="noopener">Node</a> is the basic building block of the Godot engine. Only nodes that are added to the SceneTree either in the Godot Editor or using the <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/nodes_and_scene_instances.html#creating-nodes"  class="external-link" target="_blank" rel="noopener"><code>&quot;add_child&quot;</code> method</a> can be displayed. A Node can have up to one parent Node and zero or more child Nodes. The Node at the head of the SceneTree is the &ldquo;Root Node&rdquo;. Note that &ldquo;parent&rdquo; and &ldquo;child&rdquo; here refer only to the Node hierarchy in the SceneGraph and not <a href="https://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29"  class="external-link" target="_blank" rel="noopener">class inheritance</a>.</p>
</li>
<li>
<p>A Viewport is associated with a <a href="https://docs.godotengine.org/en/stable/classes/class_displayserver.html"  class="external-link" target="_blank" rel="noopener">DisplayServer</a> which is responsible for window management.</p>
</li>
<li>
<p>A <a href="https://docs.godotengine.org/en/stable/classes/class_camera2d.html"  class="external-link" target="_blank" rel="noopener">Camera Node</a> can be 2D or 3D and provides customization beyond what the Viewport provides. For example, a Camera3D Node is required to render a scene in 3D. A Camera also allows for only a subset of the Viewport to be rendered to the screen. Most Godot projects use a Camera Node. We do not as this tutorial does not require one.</p>
</li>
<li>
<p><a href="https://docs.godotengine.org/en/stable/classes/class_input.html"  class="external-link" target="_blank" rel="noopener">Input</a> and <a href="https://docs.godotengine.org/en/stable/classes/class_engine.html#class-engine-method-get-frames-per-second"  class="external-link" target="_blank" rel="noopener">Engine</a> are <a href="https://en.wikipedia.org/wiki/Singleton_pattern"  class="external-link" target="_blank" rel="noopener">Singletons</a> providing access to the underlying capabilities of the Godot engine. Input provides access to keyboard, mouse, and game pad events. The Engine provides access to engine internals such as version, the current frame count, the frame rate (that we need), etc.</p>
</li>
<li>
<p>The RenderingServer renders Nodes in the SceneTree that appear in the hierarchy below the Viewport Node to that Viewport surface using transform parameters in the Camera Node if one is present. A SceneTree may contain multiple Viewport Nodes but we will only make use of the default &ldquo;Root Viewport&rdquo; Node at the head of the SceneTree.</p>
</li>
</ul>
<h1 id="install-the-godot-engine">
  Install the Godot Engine
  <a class="heading-link" href="#install-the-godot-engine">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p><img src="https://godotengine.org/" alt="Download and install"> the Godot engine if you have not already.</p>
<h1 id="design">
  Design
  <a class="heading-link" href="#design">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>The tasks below outline the overall design. We go into detail in the following sections as to why.</p>
<p>Tasks</p>
<ol start="0">
<li><input disabled="" type="checkbox"> <a href="#the-project" >Create the Project</a>,</li>
<li>Initialization:
<ol>
<li><input disabled="" type="checkbox"> <a href="#viewport" >Create a Viewport</a>,</li>
<li><input disabled="" type="checkbox"> Add the Viewport to the SceneTree,</li>
<li><input disabled="" type="checkbox"> <a href="#text-label" >Create a Text Label</a>,</li>
<li><input disabled="" type="checkbox"> Add the Label as a child Node of Viewport,</li>
<li><input disabled="" type="checkbox"> Assign the Label a position in x/y coordinates,</li>
</ol>
</li>
<li>Process each frame;
<ol>
<li><input disabled="" type="checkbox"> <a href="#frame-rate" >Retrieve the current frame rate</a>,</li>
<li><input disabled="" type="checkbox"> <a href="#game-loop" >Print the frame rate to the Label Node</a>.</li>
<li><input disabled="" type="checkbox"> <a href="#handling-player-input" >Process keyboard events</a>,</li>
<li><input disabled="" type="checkbox"> Exit when <code>Esc</code> is depressed.</li>
</ol>
</li>
<li><input disabled="" type="checkbox"> <a href="#game-exit" >Game Exit</a></li>
</ol>
<h1 id="create-the-pong-project">
  Create the Pong Project
  <a class="heading-link" href="#create-the-pong-project">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>Create a default project with SceneTree, Root Node and the Viewport.</p>
<ul>
<li>Start Godot and create a project named &ldquo;Pong&rdquo; in a new folder,</li>
</ul>
<p><img src="/posts/pong-tutorial-1/create-project.png" alt="Godot Editor - Create a new project" title="New Project"></p>
<p>Note: The &ldquo;new Folder&rdquo; icon is all the way to the right.</p>
<p><img src="/posts/pong-tutorial-1/create-folder.png" alt="Godot Editor - Create a new folder" title="New Folder"></p>
<ul>
<li>Then choose &ldquo;Other Node&rdquo;,</li>
</ul>
<p><img src="/posts/pong-tutorial-1/new-other-node.png" alt="Godot Editor - Create &ldquo;Other Node&rdquo;" title="New Other Node"></p>
<ul>
<li>And create the base &ldquo;Node&rdquo; (Class &ldquo;Node&rdquo;, Base class for all scene objects).</li>
</ul>
<p><img src="/posts/pong-tutorial-1/create-new-node.png" alt="Godot Editor - Create a basic Node" title="Create a basic Node"></p>
<ul>
<li>Rename the root Node to &ldquo;Pong&rdquo;,</li>
</ul>
<p><img src="/posts/pong-tutorial-1/rename-node.png" alt="Godot Editor - Rename the Root Node" title="Rename Root node"></p>
<p><img src="/posts/pong-tutorial-1/node-rename.png" alt="Godot Editor - Rename the Root Node" title="Rename Root node"></p>
<ul>
<li>Create a folder <code>res://src</code> where we will place our project source files so as to declutter the project root directory.</li>
</ul>
<p><img src="/posts/pong-tutorial-1/res-src.png" alt="Godot Editor - Create a src subdirectory" title="Create a src subdirectory"></p>
<ul>
<li>Attach a new script to the filename root &ldquo;Pong&rdquo; node.</li>
</ul>
<p><img src="/posts/pong-tutorial-1/attach-script.png" alt="Godot Editor - " title="Attach a new script to the root Node"></p>
<ul>
<li>And rename to <code>res://src/Pong.gd</code></li>
</ul>
<p><img src="/posts/pong-tutorial-1/new-script-rename.png" alt="Godot Editor - " title="Create a src subdirectory"></p>
<p><img src="/posts/pong-tutorial-1/script-name.png" alt="Godot Editor - " title="res://src/Pong.gd script"></p>
<ul>
<li>Open the <code>Pong.gd</code> file. Godot should have generated the following boilerplate code.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">extends</span> <span style="color:#f0883e;font-weight:bold">Node</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"># Called when the node enters the scene tree for the first time.</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_ready</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">pass</span> <span style="color:#8b949e;font-style:italic"># Replace with function body.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic"># Called every frame. &#39;delta&#39; is the elapsed time since the previous frame.</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_process</span>(delta: <span style="color:#ff7b72">float</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">pass</span>
</span></span></code></pre></div><p>OK, that&rsquo;s about all the work we need to do in the Scene editor in this tutorial.</p>
<h1 id="viewport">
  Viewport
  <a class="heading-link" href="#viewport">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>The RenderingServer renders the child Nodes of the Viewport to the Viewport surface. The Viewport surface is displayed to the screen.</p>
<p>We don&rsquo;t need to create a RenderingServer or DisplayServer as these are managed by the Godot Engine. We also don&rsquo;t need to create a Viewport as the &ldquo;Root Node&rdquo; by default is also the &ldquo;Root Viewport&rdquo;. We can also do without creating a <a href="https://docs.godotengine.org/en/stable/classes/class_camera2d.html"  class="external-link" target="_blank" rel="noopener">Camera Node</a> as we will be rendering the entire Viewport surface to our display without any customization.</p>
<p>See <a href="#classes-and-class-inheritance" >Classes and Class Inheritance</a> for the implementation.</p>
<h2 id="classes-and-class-inheritance">
  Classes and Class Inheritance
  <a class="heading-link" href="#classes-and-class-inheritance">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Think of a class as the blueprints for a house and an object as the house once created (instantiated).</p>
<p>Open the script file <code>Pong.gd</code>. This file defines the <code>Pong</code> class and will contain the game logic we defined in the <a href="#design" >Design</a> section. Change the first line as follows;</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">class_name</span> <span style="color:#f0883e;font-weight:bold">Pong</span> <span style="color:#ff7b72">extends</span> <span style="color:#f0883e;font-weight:bold">Node</span>
</span></span></code></pre></div><p>The <code>extends</code> keyword means we are extending <code>Node</code> <a href="https://docs.godotengine.org/en/stable/tutorials/best_practices/what_are_godot_classes.html"  class="external-link" target="_blank" rel="noopener">with a class</a> <code>Pong</code>. Pong will subclass and <a href="https://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29"  class="external-link" target="_blank" rel="noopener">inherit the methods and attributes</a> from <a href="https://docs.godotengine.org/en/stable/classes/class_node.html"  class="external-link" target="_blank" rel="noopener"><code>Node</code></a> (inheritance being one of the principles of <a href="https://en.wikipedia.org/wiki/Object-oriented_programming"  class="external-link" target="_blank" rel="noopener">OOP</a>). Almost all Godot components inherit directly or indirectly from Node. As we need to hook into the SceneTree, <code>Pong</code> must inherit from Node as well. <code>Pong.gd</code> will also contain the code we write in this tutorial.</p>
<p>We don&rsquo;t explicitly create an instance of <code>Pong</code> <a href="#object-instantiation-and-variables" >using <code>new()</code></a> because we added it as a Node to the SceneTree. The SceneTree handles the creation and deletion of Nodes in its hierarchy. See the following section <a href="#object-instantiation-and-variables" >Object Instantiation and Variables</a>.</p>
<h1 id="text-label">
  Text Label
  <a class="heading-link" href="#text-label">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>We cannot render text directly to a Viewport surface as it does not support this capability, so we cannot print &ldquo;Hello World&rdquo; as we would to a terminal. Instead we need to add a <a href="https://docs.godotengine.org/en/stable/classes/class_label.html"  class="external-link" target="_blank" rel="noopener">Label</a> Node to the SceneTree and write the current frame rate to this control using its <a href="https://docs.godotengine.org/en/stable/classes/class_label.html#class-label-property-text"  class="external-link" target="_blank" rel="noopener"><code>set_text()</code> method</a>.</p>
<p>See the following sections <a href="#object-instantiation-and-variables" >Object Instantiation and Variables</a>, and <a href="#dynamic-vs-static-typing" >Dynamic vs Static Typing</a> for the implementation.</p>
<h2 id="object-instantiation-and-variables">
  Object Instantiation and Variables
  <a class="heading-link" href="#object-instantiation-and-variables">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>We need to create an instance of <a href="https://docs.godotengine.org/en/stable/classes/class_label.html"  class="external-link" target="_blank" rel="noopener"><code>Label</code></a> to display the frame rate &ndash; in effect we are <a href="https://en.wikipedia.org/wiki/Instance_%28computer_science%29"  class="external-link" target="_blank" rel="noopener">instantiating</a> a new <code>Label</code> object. We do this by calling the <a href="https://en.wikipedia.org/wiki/Constructor_%28object-oriented_programming%29"  class="external-link" target="_blank" rel="noopener">constructor</a> method
<a href="https://docs.godotengine.org/en/stable/tutorials/scripting/nodes_and_scene_instances.html#creating-nodes"  class="external-link" target="_blank" rel="noopener"><code>new()</code></a> on the <code>Label</code> class which returns a new object of type <code>Label</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">var</span> fps: <span style="color:#f0883e;font-weight:bold">Label</span> <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#f0883e;font-weight:bold">Label</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>() <span style="color:#8b949e;font-style:italic"># Create a new Label object</span>
</span></span></code></pre></div><p>The <code>=</code> assigns the object returned by <code>Label.new()</code> to a new
<a href="https://en.wikipedia.org/wiki/Variable_%28computer_science%29"  class="external-link" target="_blank" rel="noopener">variable</a> created by <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/gdscript_basics.html#data"  class="external-link" target="_blank" rel="noopener"><code>var</code></a> having the name<code>fps</code> and type <code>Label</code>.</p>
<p>We are now able to call the <a href="https://docs.godotengine.org/en/stable/classes/class_label.html#class-label-property-text"  class="external-link" target="_blank" rel="noopener"><code>set_text()</code> method</a> on the instance of <code>Label</code> stored in <code>fps</code>, passing in the current frames per second as a <code>String</code> <a href="https://en.wikipedia.org/wiki/Parameter_%28computer_programming%29#Parameters_and_arguments"  class="external-link" target="_blank" rel="noopener">argument</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">var</span> fps: <span style="color:#f0883e;font-weight:bold">Label</span> <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#f0883e;font-weight:bold">Label</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>() <span style="color:#8b949e;font-style:italic"># Create a new Label object</span>
</span></span><span style="display:flex;"><span>fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_text</span>(<span style="color:#a5d6ff">&#34;frames per second&#34;</span>) 
</span></span></code></pre></div><h2 id="dynamic-vs-static-typing">
  Dynamic vs Static Typing
  <a class="heading-link" href="#dynamic-vs-static-typing">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p><a href="https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/gdscript_advanced.html"  class="external-link" target="_blank" rel="noopener">GDScript is a dynamically</a> <a href="https://en.wikipedia.org/wiki/Type_system#Static_type_checking"  class="external-link" target="_blank" rel="noopener">typed language</a> that supports <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/static_typing.html"  class="external-link" target="_blank" rel="noopener">explicit type definitions</a>.</p>
<p>In the example below, we assign a <code>Label</code> object to the <em>untyped</em> variable <code>fps_untyped</code> and a <code>Label</code> object to the <em>typed</em> variable <code>fps_typed</code>. The typed variable <code>fps_typed</code> can only hold objects of type <code>Label</code> or objects of classes that inherit from <code>Label</code>. An attempt to assign any other type will cause a compile time error. The untyped variable <code>fps_untyped</code> can hold objects of any type.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">var</span> fps_untyped <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#f0883e;font-weight:bold">Label</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>() <span style="color:#8b949e;font-style:italic"># Untyped</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">var</span> fps_typed: <span style="color:#f0883e;font-weight:bold">Label</span> <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#f0883e;font-weight:bold">Label</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>() <span style="color:#8b949e;font-style:italic"># Typed </span>
</span></span></code></pre></div><p>It is good practice to specify types as much as possible, even though doing so makes code more verbose, as this eliminates an entire class of errors that can be caught by a developer at compile time versus having players experience these bugs at runtime. Languages like Python are dynamically typed while a language like Go is statically typed.</p>
<h1 id="frame-rate">
  Frame Rate
  <a class="heading-link" href="#frame-rate">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>Now we need to calculate or retrieve the current frame rate. Handily, Godot provides the <a href="https://docs.godotengine.org/en/stable/classes/class_engine.html#class-engine-method-get-frames-per-second"  class="external-link" target="_blank" rel="noopener">get_frame_per_second() method</a> for this purpose.</p>
<p>See <a href="#singletons" >Singletons</a> for the implementation.</p>
<h2 id="singletons">
  Singletons
  <a class="heading-link" href="#singletons">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Godot provides the <a href="https://en.wikipedia.org/wiki/Singleton_pattern"  class="external-link" target="_blank" rel="noopener">Singleton</a> object <a href="https://docs.godotengine.org/en/stable/classes/class_engine.html"  class="external-link" target="_blank" rel="noopener">Engine</a> that implements the method <a href="https://docs.godotengine.org/en/stable/classes/class_engine.html#class-engine-method-get-frames-per-second"  class="external-link" target="_blank" rel="noopener"><code>get_frames_per_second()</code></a> that returns the current frames-per-second. A Singleton is a <a href="https://en.wikipedia.org/wiki/Design_Patterns"  class="external-link" target="_blank" rel="noopener">design pattern</a> used to ensure that there will only ever be one instance of a class, as an alternative to assigning an object to a global variable. We don&rsquo;t need to create an instance of <a href="https://docs.godotengine.org/en/stable/classes/class_engine.html#class-engine-method-get-frames-per-second"  class="external-link" target="_blank" rel="noopener"><code>Engine</code></a> using <code>new()</code> as the Engine is managed by Godot.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">var</span> fps: <span style="color:#f0883e;font-weight:bold">Label</span> <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#f0883e;font-weight:bold">Label</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>() <span style="color:#8b949e;font-style:italic"># Create a new Label object</span>
</span></span><span style="display:flex;"><span>fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_text</span>(str(<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_frames_per_second</span>())) <span style="color:#8b949e;font-style:italic"># Set fps.text to the current fps</span>
</span></span></code></pre></div><p>The <code>str()</code> function converts the <code>float</code> returned by <code>Engine.get_frames_per_second()</code> to a <code>String</code> value required by <code>set_text</code>. Not performing this conversion will result in a runtime error.</p>
<h1 id="the-game-loop">
  The Game Loop
  <a class="heading-link" href="#the-game-loop">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>The game loop drives the game. Everything that happens in the game, physics, AI, sound, handling input, rendering graphics, networking, game mechanics, happens in the game loop. A game loop will typically execute between 30 and 60 times each second.</p>
<ol start="0">
<li><input checked="" disabled="" type="checkbox"> <a href="#the-project" >Create the Project</a>,</li>
<li>Initialization:
<ol>
<li><input checked="" disabled="" type="checkbox"> <a href="#viewport" >Create a Viewport</a>,</li>
<li><input checked="" disabled="" type="checkbox"> Add the Viewport to the SceneTree,</li>
<li><input checked="" disabled="" type="checkbox"> <a href="#text-label" >Create a Text Label</a>,</li>
<li><input disabled="" type="checkbox"> Add the Label as a child Node of Viewport,</li>
<li><input disabled="" type="checkbox"> Assign the Label a position in x/y coordinates,</li>
</ol>
</li>
<li>Process each frame;
<ol>
<li><input checked="" disabled="" type="checkbox"> <a href="#frame-rate" >Retrieve the current frame rate</a>,</li>
<li><input disabled="" type="checkbox"> <a href="#game-loop" >Print the frame rate to the Label Node</a>.</li>
<li><input disabled="" type="checkbox"> <a href="#handling-player-input" >Process keyboard events</a>,</li>
<li><input disabled="" type="checkbox"> Exit when <code>Esc</code> is depressed.</li>
</ol>
</li>
<li><input disabled="" type="checkbox"> <a href="#game-exit" >Game Exit</a></li>
</ol>
<p>Steps (1.1) - (1.5) should be performed once, while steps (2.1) - (2.4) are performed each frame. We can accomplish this by <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/overridable_functions.html"  class="external-link" target="_blank" rel="noopener">overriding</a> the <code>_initialize()</code> and <code>_process()</code> methods defined in the <a href="https://docs.godotengine.org/en/stable/classes/class_mainloop.html"  class="external-link" target="_blank" rel="noopener">MainLoop</a>.</p>
<p>See <a href="#the-scenetree" >The SceneTree</a>, <a href="#variable-scope" >Variable Scope</a>, <a href="#static-instance-and-virtual-methods" >Static and Instance Methods</a>, <a href="#conditionals" >Conditionals</a>, and <a href="#constants" >Constants</a> for the implementation.</p>
<h2 id="the-scenetree">
  The SceneTree
  <a class="heading-link" href="#the-scenetree">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The <a href="https://docs.godotengine.org/en/stable/classes/class_scenetree.html"  class="external-link" target="_blank" rel="noopener">SceneTree</a> is what is called a <a href="https://en.wikipedia.org/wiki/Scene_graph"  class="external-link" target="_blank" rel="noopener">scene graph</a>, a hierarchy of Nodes in an inverted tree structure.</p>
<p>The <code>Label</code> must be added to a Node in the SceneTree before the frame rate can be displayed. One of <a href="#create-the-pong-project" >our first steps</a> was to add our <code>Pong</code> Node to the SceneTree by <a href="#classes-and-class-inheritance" >subclassing the Root Node</a>. We are now able to add <code>Label</code> as a child Node to the <code>Pong</code> Node using the <a href="https://docs.godotengine.org/en/stable/classes/class_node.html#class-node-method-add-child"  class="external-link" target="_blank" rel="noopener"><code>add_child</code></a> method. Note that <a href="https://docs.godotengine.org/en/stable/classes/class_label.html"  class="external-link" target="_blank" rel="noopener"><code>Label</code></a> is also a subclass of Node and therefore inherits all of Node&rsquo;s attributes and methods.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">var</span> fps: <span style="color:#f0883e;font-weight:bold">Label</span> <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#f0883e;font-weight:bold">Label</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>() <span style="color:#8b949e;font-style:italic"># Create a new Label object</span>
</span></span><span style="display:flex;"><span>self<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">call_deferred</span>(<span style="color:#a5d6ff">&#34;add_child&#34;</span>, fps) <span style="color:#8b949e;font-style:italic"># Explicitly add the label to the scene</span>
</span></span><span style="display:flex;"><span>fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_position</span>(<span style="color:#f0883e;font-weight:bold">Vector2</span>(<span style="color:#a5d6ff">0</span>,<span style="color:#a5d6ff">0</span>)) <span style="color:#8b949e;font-style:italic"># Set position</span>
</span></span><span style="display:flex;"><span>fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_text</span>(str(<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_frames_per_second</span>())) <span style="color:#8b949e;font-style:italic"># Set fps.text to the current fps</span>
</span></span></code></pre></div><p>Calls to <code>add_child()</code> (and <code>free()</code>) are generally passed into a <a href="https://docs.godotengine.org/en/stable/classes/class_object.html#class-object-method-call-deferred"  class="external-link" target="_blank" rel="noopener"><code>call_deferred()</code></a> method that postpones execution of <code>&quot;add_child&quot;</code> until idle time.</p>
<p>In the code, we call <code>self.call_deferred</code>, where <code>self</code> refers to &ldquo;the current Node&rdquo;, in this case the <code>Pong</code> Node. GDScript does allow <code>self</code> to be omitted but I prefer to use <code>self</code> as it makes explicit that a method is being invoked on the current Node.</p>
<p>The SceneTree manages the <a href="https://docs.godotengine.org/en/stable/classes/class_mainloop.html"  class="external-link" target="_blank" rel="noopener">MainLoop</a> which calls the virtual methods <code>_initialize()</code>, <code>_finalize()</code>, and <code>_process()</code> on each <code>Node</code> object in the SceneTree.</p>
<p>To recap;</p>
<ol>
<li>Initialization:
0. Create the project,
<ol>
<li>Create a Viewport,</li>
<li>Add the Viewport to the SceneTree,</li>
<li>Create a Label Node,</li>
<li>Add the Label as a child Node of Viewport,</li>
<li>Assign the Label a position in x/y coordinates,</li>
</ol>
</li>
<li>Process each frame;
<ol>
<li>Retrieve the current frame rate,</li>
<li>Print the frame rate to the Label Node.</li>
<li>Process keyboard events,</li>
<li>Exit when <code>Esc</code> is depressed.</li>
</ol>
</li>
</ol>
<p>To implement &ldquo;Initialization&rdquo; and &ldquo;Process each frame&rdquo;, we <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/overridable_functions.html"  class="external-link" target="_blank" rel="noopener">override the virtual methods</a>, <code>_ready()</code> and <code>_process()</code>. Unlike Instance methods, Virtual methods must be implemented by the subclass.</p>
<ul>
<li><code>_ready()</code> is called after a node is added to the scene graph and is ready for use, and</li>
<li><code>_process()</code> is called each frame.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_ready</span>():
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">var</span> fps: <span style="color:#f0883e;font-weight:bold">Label</span> <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#f0883e;font-weight:bold">Label</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>() <span style="color:#8b949e;font-style:italic"># Create a new Label object</span>
</span></span><span style="display:flex;"><span>    self<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">call_deferred</span>(<span style="color:#a5d6ff">&#34;add_child&#34;</span>, fps) <span style="color:#8b949e;font-style:italic"># Explicitly add the label to the scene</span>
</span></span><span style="display:flex;"><span>    fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_position</span>(<span style="color:#f0883e;font-weight:bold">Vector2</span>(<span style="color:#a5d6ff">0</span>,<span style="color:#a5d6ff">0</span>)) <span style="color:#8b949e;font-style:italic"># Set position</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_process</span>(_delta: <span style="color:#ff7b72">float</span>):
</span></span><span style="display:flex;"><span>    fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_text</span>(str(<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_frames_per_second</span>())) <span style="color:#8b949e;font-style:italic"># Set fps.text to the current fps</span>
</span></span></code></pre></div><p>But how does Godot know to call our methods? When the game starts, Godot will instantiate the root node (<code>Pong</code>). <code>Pong</code> instantiates the <code>Label</code> Node and adds this as a child node to itself (using <code>&quot;add_child&quot;</code>). The SceneTree calls <a href="https://docs.godotengine.org/en/stable/classes/class_node.html#class-node-private-method-ready"  class="external-link" target="_blank" rel="noopener"><code>_ready()</code></a> after Pong the Pong Node is added to the SceneTree, and calls <a href="https://docs.godotengine.org/en/stable/classes/class_node.html#class-node-private-method-process"  class="external-link" target="_blank" rel="noopener">_process()</a> once per frame. The SceneTree will call <code>_ready()</code> and <code>_process()</code> on the <code>Label</code> object if we had overridden those methods, which we do not.</p>
<h2 id="variable-scope">
  Variable Scope
  <a class="heading-link" href="#variable-scope">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The previous code exhibits a bug in that <code>fps</code> is defined as a local variable meaning it is visible only within <a href="https://en.wikipedia.org/wiki/Scope_%28computer_science%29#Function_scope"  class="external-link" target="_blank" rel="noopener">the scope</a> of <code>_ready()</code>. But <code>fps</code> <a href="https://en.wikipedia.org/wiki/Scope_%28computer_science%29#Lexical_scope"  class="external-link" target="_blank" rel="noopener">needs to be visible</a> to both <code>_ready()</code> and <code>_process()</code>. We must therefore define <code>fps</code> as an instance variable, placing <code>fps</code> in the class scope and <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/gdscript_basics.html#functions"  class="external-link" target="_blank" rel="noopener">visible to all methods of the class</a>. We create an instance variable by moving <code>fps:</code> to the top level.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">var</span> fps: <span style="color:#f0883e;font-weight:bold">Label</span> <span style="color:#8b949e;font-style:italic"># Crete a variable of type Label</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_ready</span>():
</span></span><span style="display:flex;"><span>    fps <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#f0883e;font-weight:bold">Label</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>() <span style="color:#8b949e;font-style:italic"># Create a new Label object</span>
</span></span><span style="display:flex;"><span>	  self<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">call_deferred</span>(<span style="color:#a5d6ff">&#34;add_child&#34;</span>, fps) <span style="color:#8b949e;font-style:italic"># Explicitly add the label to the scene</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_process</span>(_delta: <span style="color:#ff7b72">float</span>):
</span></span><span style="display:flex;"><span>    fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_text</span>(str(<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_frames_per_second</span>())) <span style="color:#8b949e;font-style:italic"># Set fps.text to the current fps</span>
</span></span></code></pre></div><p><em>instance</em> and <em>local</em> variables differ to <em>static</em> variables in that the value of a <em>static</em> variable is shared across all instances of a class, whereas <em>instance</em> and <em>local</em> variables are specific to an instance.</p>
<h2 id="static-instance-and-virtual-methods">
  Static, Instance, and Virtual Methods
  <a class="heading-link" href="#static-instance-and-virtual-methods">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>GDScript only supports the creation of <a href="https://en.wikipedia.org/wiki/Method_%28computer_programming%29#Static_methods"  class="external-link" target="_blank" rel="noopener"><em>static</em></a> and <em>virtual</em> <a href="https://en.wikipedia.org/wiki/Method_%28computer_programming%29"  class="external-link" target="_blank" rel="noopener">methods</a>. Methods not identified as static using the <em>static</em> keyword are <em>virtual</em> and <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/overridable_functions.html"  class="external-link" target="_blank" rel="noopener">can be overridden</a> (GDScript has no <em>virtual</em> keyword).</p>
<p>A <em>static</em> method can be invoked even if no instances of the class exist yet. A <em>virtual</em> method can only be invoked on an instance of the class.</p>
<p>A developer cannot create <em>non-virtual</em> methods in GDScript. Internal methods exported by the Godot engine through GDScript however can be <em>static</em>, <em>virtual</em> (overridable) and <em>non-virtual</em> (non-overridable).</p>
<h2 id="conditionals">
  Conditionals
  <a class="heading-link" href="#conditionals">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>We don&rsquo;t need to update the frame rate on each frame (e.g. 60 times a second), so we make use of an <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/gdscript_basics.html#if-else-elif"  class="external-link" target="_blank" rel="noopener">if conditional</a> to update the frame rate every tenth frame.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_process</span>(_delta: <span style="color:#ff7b72">float</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">if</span> <span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_process_frames</span>() <span style="color:#ff7b72;font-weight:bold">%</span> <span style="color:#a5d6ff">10</span> <span style="color:#ff7b72;font-weight:bold">==</span> <span style="color:#a5d6ff">0</span>:
</span></span><span style="display:flex;"><span>		fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_text</span>(FPS_TEXT <span style="color:#ff7b72;font-weight:bold">+</span> str (<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_frames_per_second</span>()))
</span></span></code></pre></div><p>The <code>%</code> is the modulo or remainder operator. It returns the remainder when dividing the number of frames since game start (<code>Engine.get_process_frames()</code>) by <code>10</code>. If the remainder is <code>0</code> then the conditional is said to evaluate to <code>true</code> and we update the frame rate.</p>
<h2 id="constants">
  Constants
  <a class="heading-link" href="#constants">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>We define several <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/gdscript_basics.html#constants"  class="external-link" target="_blank" rel="noopener">constants</a> with values for maximum frame rate, fps update interval, and the FPS text. Constants are used instead of variables when we don&rsquo;t want the value assigned to a variable to change during program execution. Some other advantages of constants include improving code readability, and changing the value of a constant will be reflected everywhere that constant is used.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">class_name</span> <span style="color:#f0883e;font-weight:bold">Pong</span> <span style="color:#ff7b72">extends</span> <span style="color:#f0883e;font-weight:bold">Node2D</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">const</span> MAX_FPS <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#a5d6ff">0</span> <span style="color:#8b949e;font-style:italic"># Zero means use the maximum frame rate</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">const</span> UPDATE_INTERVAL <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#a5d6ff">10</span> <span style="color:#8b949e;font-style:italic"># Update the frames per second every ten frames.</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">const</span> FPS_TEXT <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#a5d6ff">&#34;FPS: &#34;</span> <span style="color:#8b949e;font-style:italic"># Constant prefix displayed with the current fps, e.g. &#34;FPS: 60&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">const</span> ACTION_UI_CANCEL <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#a5d6ff">&#34;ui_cancel&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">var</span> fps: <span style="color:#f0883e;font-weight:bold">Label</span> <span style="color:#8b949e;font-style:italic"># Crete a variable of type Label</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_ready</span>():
</span></span><span style="display:flex;"><span>	<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_max_fps</span>(MAX_FPS) <span style="color:#8b949e;font-style:italic"># Set the &#34;do not exceed&#34; frame rate.</span>
</span></span><span style="display:flex;"><span>  fps <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#f0883e;font-weight:bold">Label</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>() <span style="color:#8b949e;font-style:italic"># Create a new Label object</span>
</span></span><span style="display:flex;"><span>	fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_position</span>(<span style="color:#f0883e;font-weight:bold">Vector2</span>(<span style="color:#a5d6ff">0</span>,<span style="color:#a5d6ff">0</span>)) <span style="color:#8b949e;font-style:italic"># Set position</span>
</span></span><span style="display:flex;"><span>	self<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">call_deferred</span>(<span style="color:#a5d6ff">&#34;add_child&#34;</span>, fps) <span style="color:#8b949e;font-style:italic"># Add the label to the scene</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_process</span>(_delta: <span style="color:#ff7b72">float</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">if</span> <span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_process_frames</span>() <span style="color:#ff7b72;font-weight:bold">%</span> UPDATE_INTERVAL <span style="color:#ff7b72;font-weight:bold">==</span> <span style="color:#a5d6ff">0</span>:
</span></span><span style="display:flex;"><span>		fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_text</span>(FPS_TEXT <span style="color:#ff7b72;font-weight:bold">+</span> str(<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_frames_per_second</span>()))
</span></span></code></pre></div><h1 id="handling-player-input">
  Handling Player Input
  <a class="heading-link" href="#handling-player-input">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>We can exit the game by closing the Godot window. But as the plan is to use the keyboard to control the paddles, we may as well start now and explore how to handle keyboard input and exit the game when the <code>Esc</code> key is depressed.</p>
<p>The methods to retrieve player input are provided by the <a href="https://docs.godotengine.org/en/stable/classes/class_input.html"  class="external-link" target="_blank" rel="noopener">Input Singleton</a>. We use the <a href="https://docs.godotengine.org/en/stable/classes/class_input.html#class-input-method-is-action-pressed"  class="external-link" target="_blank" rel="noopener">is_action_pressed()</a> method and filter events to the <code>&quot;ui_cancel&quot;</code> signal which is by default mapped to the <code>Esc</code> key.</p>
<p>See <a href="#handling-input" >Handling Input</a> for the implementation.</p>
<h2 id="handling-input">
  Handling Input
  <a class="heading-link" href="#handling-input">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>Checking if the player depressed the <code>Esc</code> key is straightforward. <a href="https://docs.godotengine.org/en/stable/classes/class_input.html#class-input-method-is-action-pressed"  class="external-link" target="_blank" rel="noopener"><code>Input.is_Action_Pressed(&quot;ui_cancel&quot;)</code></a> returns <code>true</code> when an event action is received that is mapped to the <code>Esc</code> key.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_process</span>(_delta: <span style="color:#ff7b72">float</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">if</span> <span style="color:#f0883e;font-weight:bold">Input</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">is_action_pressed</span>(ACTION_UI_CANCEL): <span style="color:#d2a8ff;font-weight:bold">exitGame</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">if</span> <span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_process_frames</span>() <span style="color:#ff7b72;font-weight:bold">%</span> UPDATE_INTERVAL <span style="color:#ff7b72;font-weight:bold">==</span> <span style="color:#a5d6ff">0</span>:
</span></span><span style="display:flex;"><span>		fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_text</span>(FPS_TEXT <span style="color:#ff7b72;font-weight:bold">+</span> str (<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_frames_per_second</span>()))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">exitGame</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	self<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_tree</span>()<span style="color:#ff7b72;font-weight:bold">.</span>root<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">propagate_notification</span>(NOTIFICATION_WM_CLOSE_REQUEST)
</span></span><span style="display:flex;"><span>	self<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_tree</span>()<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">quit</span>()
</span></span></code></pre></div><p>We define a method <code>exitGame()</code> to send the &ldquo;window close&rdquo; request to the DisplayServer (attached to the root node) and tell the SceneTree to exit.</p>
<h1 id="game-exit">
  Game Exit
  <a class="heading-link" href="#game-exit">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>We need to cleanup any resources we allocate (<code>Label</code>)  as Godot only <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/gdscript_basics.html#memory-management"  class="external-link" target="_blank" rel="noopener">supports limited garbage collection</a>.</p>
<p>See <a href="#object-constructors-and-destructors-finalizers" >Object Constructors and Destructors, Finalizers</a> for the implementation.</p>
<h2 id="object-constructors-and-destructors-finalizers">
  Object Constructors and Destructors, Finalizers
  <a class="heading-link" href="#object-constructors-and-destructors-finalizers">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The virtual methods <code>_init()</code>, <code>_ready()</code>, and <code>_finalize()</code> <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/overridable_functions.html"  class="external-link" target="_blank" rel="noopener">can be overridden</a> to manage the object life cycle.</p>
<ul>
<li><code>_init()</code> is a <a href="https://en.wikipedia.org/wiki/Constructor_%28object-oriented_programming%29"  class="external-link" target="_blank" rel="noopener"><em>constructor</em></a>.
This method is called when an object is instantiated in, for example, a call to <code>new()</code>. <code>_init()</code> is called before <code>_ready()</code>.</li>
<li><code>_ready()</code> is called after the object is added to the SceneTree and is ready to be used. This means that <code>_ready()</code> is only called on objects added to the SceneTree.</li>
<li><code>finalize()</code> is a <a href="https://en.wikipedia.org/wiki/Destructor_%28computer_programming%29"  class="external-link" target="_blank" rel="noopener"><em>destructor</em></a>, called when the object is deleted following, for example, a call to <code>call_deferred(&quot;free&quot;)</code>.</li>
</ul>
<p>Godot <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/gdscript_basics.html#memory-management"  class="external-link" target="_blank" rel="noopener">supports limited garbage collection</a>, for example resources explicitly allocated (e.g. using <code>new()</code>) <a href="https://docs.godotengine.org/en/stable/classes/class_object.html#class-object-method-free"  class="external-link" target="_blank" rel="noopener">must be explicitly deleted using <code>free()</code></a>. Not doing so will result in <a href="https://en.wikipedia.org/wiki/Memory_leak"  class="external-link" target="_blank" rel="noopener">memory leaks</a>.</p>
<p>The code shows this; we explicitly instantiated <code>Label</code> using <code>new()</code> requiring that we explicitly delete <code>Label</code> by calling <code>fps.call_deferred(&quot;free&quot;)</code> (<a href="https://docs.godotengine.org/en/stable/classes/class_object.html#class-object-method-call-deferred"  class="external-link" target="_blank" rel="noopener"><code>call_deferred()</code></a>) when we are done with it. We do this in the <code>_finalize()</code> method of our <code>Pong</code> class.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_finalize</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">call_deferred</span>(<span style="color:#a5d6ff">&#34;free&#34;</span>) <span style="color:#8b949e;font-style:italic"># Because we added the label, we also need to delete it</span>
</span></span></code></pre></div><p>The <code>Pong</code> Node was added to the SceneTree in section <a href="#create-the-pong-project" >Create the Pong Project</a>, so the creation and deletion of the <code>Pong</code> instance is managed by the SceneTree.</p>
<h1 id="information-hiding-and-encapsulation">
  Information Hiding and Encapsulation
  <a class="heading-link" href="#information-hiding-and-encapsulation">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>The <code>Pong</code> class can be simplified using <a href="https://en.wikipedia.org/wiki/Information_hiding"  class="external-link" target="_blank" rel="noopener">information hiding</a>, by encapsulating the frame rate logic into its own <code>FrameRate</code> class in a new <code>res://src/FrameRate.gd</code> file.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">### In res://src/FrameRate.gd</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">class_name</span> <span style="color:#f0883e;font-weight:bold">FrameRate</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">var</span> label: <span style="color:#f0883e;font-weight:bold">Label</span>: <span style="color:#8b949e;font-style:italic"># Set and get the Label</span>
</span></span><span style="display:flex;"><span>	get: <span style="color:#ff7b72">return</span> label
</span></span><span style="display:flex;"><span>	<span style="color:#d2a8ff;font-weight:bold">set</span>(value): label <span style="color:#ff7b72;font-weight:bold">=</span> value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">var</span> interval: <span style="color:#ff7b72">int</span>: <span style="color:#8b949e;font-style:italic"># Update the fps at interval</span>
</span></span><span style="display:flex;"><span>	<span style="color:#d2a8ff;font-weight:bold">set</span>(value): interval <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#ff7b72">int</span>(value)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_init</span>(pos: <span style="color:#f0883e;font-weight:bold">Vector2</span>, i: <span style="color:#ff7b72">int</span>):
</span></span><span style="display:flex;"><span>	label <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#f0883e;font-weight:bold">Label</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>()
</span></span><span style="display:flex;"><span>    label<span style="color:#ff7b72;font-weight:bold">.</span>position <span style="color:#ff7b72;font-weight:bold">=</span> pos
</span></span><span style="display:flex;"><span>    internal <span style="color:#ff7b72;font-weight:bold">=</span> i
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">update</span>(frames: <span style="color:#ff7b72">float</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">if</span> <span style="color:#ff7b72">int</span>(ceil(frames)) <span style="color:#ff7b72;font-weight:bold">%</span> interval <span style="color:#ff7b72;font-weight:bold">==</span> <span style="color:#a5d6ff">0</span>:
</span></span><span style="display:flex;"><span>		label<span style="color:#ff7b72;font-weight:bold">.</span>text <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#a5d6ff">&#34;FPS: &#34;</span> <span style="color:#ff7b72;font-weight:bold">+</span> str(frames)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">Node</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#f0883e;font-weight:bold">Node</span>: <span style="color:#ff7b72">return</span> label
</span></span></code></pre></div><ul>
<li>We implement <a href="https://docs.godotengine.org/en/stable/tutorials/scripting/gdscript/gdscript_basics.html#properties-setters-and-getters"  class="external-link" target="_blank" rel="noopener">getters and setters</a> for <code>label</code> and <code>interval</code> as an example of how to hide variables from direct access by external classes. This is useful when logic must run each time a variable is accessed. Here, we convert a value to an integer before assigning to <code>interval</code>.</li>
<li>The <code>_init()</code> function accepts a <code>Vector</code> containing the position and an update interval as an <code>integer</code>. The ability to change the <code>_init()</code> constructor in this manner is called_<a href="https://en.wikipedia.org/wiki/Function_overloading#Constructor_overloading"  class="external-link" target="_blank" rel="noopener">constructor overloading</a>.
<ul>
<li>GDScript does not support <a href="https://en.wikipedia.org/wiki/Function_overloading#Rules_in_function_overloading"  class="external-link" target="_blank" rel="noopener">function overloading</a> &ndash; different functions with the same function name but different parameters,</li>
<li>GDScript does support <a href="https://en.wikipedia.org/wiki/Polymorphism_%28computer_science%29"  class="external-link" target="_blank" rel="noopener">polymorphism</a> &ndash; a single function that is able to accept different types for the same parameter, and</li>
<li><a href="https://en.wikipedia.org/wiki/Method_overriding"  class="external-link" target="_blank" rel="noopener">Function overriding</a> &ndash; a function in a derived class providing an implemention already provided by a function in superclass.</li>
</ul>
</li>
<li>The function <code>ceil(frames)</code> in <code>update()</code> rounds up a fractional frame rate to the nearest integer, e.g. <code>33.2</code> becomes <code>34</code>.</li>
<li>The function <code>node()</code> is the common interface for retrieving the <code>Ndde</code> associated with the <code>FrameRate</code> object, in this case the <code>Label</code>. In If we had implemented <code>FrameRate</code> to extend<code>Label</code>, then <code>node()</code> would return the <code>FrameRate</code> object itself.</li>
</ul>
<p>Now <code>Pong</code> is refactored to remove the frame rate logic;</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">### In res://src/Pong.gd</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_ready</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_max_fps</span>(MAX_FPS)
</span></span><span style="display:flex;"><span>	fps <span style="color:#ff7b72;font-weight:bold">=</span> FrameRate<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">New</span>(<span style="color:#f0883e;font-weight:bold">Vector2</span>(<span style="color:#a5d6ff">0</span>,<span style="color:#a5d6ff">0</span>), UPDATE_INTERVAL)
</span></span><span style="display:flex;"><span>	<span style="color:#d2a8ff;font-weight:bold">addChild</span>(fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#f0883e;font-weight:bold">Node</span>()) <span style="color:#8b949e;font-style:italic"># Add the fps.label as a child Node to Pong</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_process</span>(_delta: <span style="color:#ff7b72">float</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">if</span> <span style="color:#f0883e;font-weight:bold">Input</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">is_action_pressed</span>(ACTION_UI_CANCEL): <span style="color:#d2a8ff;font-weight:bold">exitGame</span>()
</span></span><span style="display:flex;"><span>	fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">update</span>(<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_frames_per_second</span>())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">addChild</span>(n: <span style="color:#f0883e;font-weight:bold">Node</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	self<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">call_deferred</span>(<span style="color:#a5d6ff">&#34;add_child&#34;</span>, n)
</span></span></code></pre></div><p><code>Pong</code> is responsible for adding the FrameRate object to the SceneTree. via <code>addChild()</code>.</p>
<h2 id="alternative-implementation">
  Alternative Implementation
  <a class="heading-link" href="#alternative-implementation">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>The <code>FrameRate</code>  object is able to add itself to the SceneTree by passing the <code>Pong</code> node in the <code>FrameRate</code> constructor <code>init(self, Vector2(0,0), UPDATE_INTERVAL)</code>. See the example below.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">### In res://src/Pong.gd</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_ready</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_max_fps</span>(MAX_FPS)
</span></span><span style="display:flex;"><span>	fps <span style="color:#ff7b72;font-weight:bold">=</span> FrameRate<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>(self, <span style="color:#f0883e;font-weight:bold">Vector2</span>(<span style="color:#a5d6ff">0</span>,<span style="color:#a5d6ff">0</span>), UPDATE_INTERVAL)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">### In res://src/FrameRate.gd</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_init</span>(parent: <span style="color:#f0883e;font-weight:bold">Node</span>, pos: <span style="color:#f0883e;font-weight:bold">Vector2</span>, i: <span style="color:#ff7b72">int</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> FrameRate:
</span></span><span style="display:flex;"><span>	label <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#f0883e;font-weight:bold">Label</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>()
</span></span><span style="display:flex;"><span>	label<span style="color:#ff7b72;font-weight:bold">.</span>position <span style="color:#ff7b72;font-weight:bold">=</span> pos
</span></span><span style="display:flex;"><span>	interval <span style="color:#ff7b72;font-weight:bold">=</span> i
</span></span><span style="display:flex;"><span>	parent<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">call_deferred</span>(<span style="color:#a5d6ff">&#34;add_child&#34;</span>, label)
</span></span></code></pre></div><p>Having <code>FrameRate</code> add itself to the SceneTree introduces the SceneTree as a dependency in <code>FrameRate</code>, complicating <a href="https://en.wikipedia.org/wiki/Unit_testing"  class="external-link" target="_blank" rel="noopener">unit tests</a>. We would need to pass a SceneTree just to test <code>FrameRate</code>. Having <code>Pong</code> add <code>FrameRate</code> to the SceneTree removes this dependency.</p>
<p><code>FrameRate.update()</code> can retrieve the frame rate directly instead of receiving the frame rate from <code>Pong._process()</code>. See the example below;</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">### In res://src/Pong.gd</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_process</span>(_delta: <span style="color:#ff7b72">float</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">if</span> <span style="color:#f0883e;font-weight:bold">Input</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">is_action_pressed</span>(ACTION_UI_CANCEL): <span style="color:#d2a8ff;font-weight:bold">exitGame</span>()
</span></span><span style="display:flex;"><span>	fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">update</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">### In res://src/FrameRate.gd</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">update</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">var</span> frames: <span style="color:#ff7b72">float</span> <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_frames_per_second</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">if</span> <span style="color:#ff7b72">int</span>(ceil(frames)) <span style="color:#ff7b72;font-weight:bold">%</span> interval <span style="color:#ff7b72;font-weight:bold">==</span> <span style="color:#a5d6ff">0</span>:
</span></span><span style="display:flex;"><span>		label<span style="color:#ff7b72;font-weight:bold">.</span>text <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#a5d6ff">&#34;FPS: &#34;</span> <span style="color:#ff7b72;font-weight:bold">+</span> str(frames)
</span></span></code></pre></div><p>But this introduces the Godot engine as a dependency when testing <code>FrameRate.update()</code>. Always try to minimize dependencies and side-effects when writing software.</p>
<h1 id="composition-vs-inheritance">
  Composition vs Inheritance
  <a class="heading-link" href="#composition-vs-inheritance">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<blockquote>
<p>&hellip; classes should favor polymorphic behavior and code reuse by their composition (by containing instances of other classes that implement the desired functionality) over inheritance from a base or parent class
&ndash; <a href="https://en.wikipedia.org/wiki/Composition_over_inheritance"  class="external-link" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/Composition_over_inheritance</a></p>
</blockquote>
<blockquote>
<p>Composition over Inheritance Explained by Games &ndash; YouTube
&ndash; <a href="https://www.youtube.com/watch?v=HNzP1aLAffM"  class="external-link" target="_blank" rel="noopener">https://www.youtube.com/watch?v=HNzP1aLAffM</a></p>
</blockquote>
<blockquote>
<p>HN: Game developers: don&rsquo;t use inheritance for your game objects
&ndash; <a href="https://news.ycombinator.com/item?id=3560408"  class="external-link" target="_blank" rel="noopener">https://news.ycombinator.com/item?id=3560408</a></p>
</blockquote>
<p>Inheritance vs composition is a design choice. GoDot definitely favors inheritance, however I prefer composition.</p>
<p>Our implementation uses composition where <code>FrameRate</code> contains a <code>Label</code> (&ldquo;has-a&rdquo;). But <code>FrameRate</code> can inherit from and extend <code>Label</code> (&ldquo;is-a&rdquo;), see the example below.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">### In res://src/Pong.gd</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_process</span>(_delta: <span style="color:#ff7b72">float</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">if</span> <span style="color:#f0883e;font-weight:bold">Input</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">is_action_pressed</span>(ACTION_UI_CANCEL): <span style="color:#d2a8ff;font-weight:bold">exitGame</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">### In res://src/FrameRate.gd</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">class_name</span> <span style="color:#f0883e;font-weight:bold">FrameRate</span> <span style="color:#ff7b72">extends</span> <span style="color:#f0883e;font-weight:bold">Label</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">var</span> interval: <span style="color:#ff7b72">int</span>: <span style="color:#8b949e;font-style:italic"># Update the fps at interval</span>
</span></span><span style="display:flex;"><span>	<span style="color:#d2a8ff;font-weight:bold">set</span>(value): interval <span style="color:#ff7b72;font-weight:bold">=</span> value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_init</span>(pos: <span style="color:#f0883e;font-weight:bold">Vector2</span>, i: <span style="color:#ff7b72">int</span>):
</span></span><span style="display:flex;"><span>	position <span style="color:#ff7b72;font-weight:bold">=</span> pos
</span></span><span style="display:flex;"><span>	interval <span style="color:#ff7b72;font-weight:bold">=</span> i
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_process</span>(_delta: <span style="color:#ff7b72">float</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>    <span style="color:#ff7b72">var</span> frames: <span style="color:#ff7b72">float</span> <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_frames_per_second</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">if</span> <span style="color:#ff7b72">int</span>(ceil(frames)) <span style="color:#ff7b72;font-weight:bold">%</span> interval <span style="color:#ff7b72;font-weight:bold">==</span> <span style="color:#a5d6ff">0</span>:
</span></span><span style="display:flex;"><span>		text <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#a5d6ff">&#34;FPS: &#34;</span> <span style="color:#ff7b72;font-weight:bold">+</span> str(frames)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">node</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#f0883e;font-weight:bold">Node</span>: <span style="color:#ff7b72">return</span> self
</span></span></code></pre></div><p>Inheritance generally has the advantage of less code and this holds true here;</p>
<ul>
<li>The logic from <code>FrameRate.update()</code> moves into the inherited virtual method <code>FrameRate_process()</code>,</li>
<li><code>Pong._process()</code> no longer needs to call <code>FrameRate._process()</code> as the SceneTree calls <code>FrameRate_process()</code> on each frame.</li>
</ul>
<p>A limitation of inheritance is that rendering the frame rate in a 3D scene requires that <code>FrameRate</code> inherit from <code>Label3D</code> which means defining a new class <code>FrameRate3D</code>. This new class contains much the same logic as <code>Label</code> resulting in double the code. Inheritance generally leads to the proliferation of small classes.</p>
<p>Using composition, we can modify <code>FrateRate</code> to support both <code>Label</code> and <code>Label3D</code> as follows;</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">### In res://src/Pong.gd</span>
</span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">### Specifying a 2D label, passing this object into FrameRate</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_ready</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_max_fps</span>(MAX_FPS)
</span></span><span style="display:flex;"><span>	fps <span style="color:#ff7b72;font-weight:bold">=</span> FrameRate<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>(<span style="color:#f0883e;font-weight:bold">Label</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>(), <span style="color:#f0883e;font-weight:bold">Vector2</span>(<span style="color:#a5d6ff">0</span>,<span style="color:#a5d6ff">0</span>), UPDATE_INTERVAL)
</span></span><span style="display:flex;"><span>	<span style="color:#d2a8ff;font-weight:bold">addChild</span>(fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">node</span>())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">### In res://src/Pong.gd</span>
</span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">### Specifying a 3D label, passing this object into FrameRate</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_ready</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_max_fps</span>(MAX_FPS)
</span></span><span style="display:flex;"><span>	fps <span style="color:#ff7b72;font-weight:bold">=</span> FrameRate<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>(<span style="color:#f0883e;font-weight:bold">Label3D</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>(), <span style="color:#f0883e;font-weight:bold">Vector2</span>(<span style="color:#a5d6ff">0</span>,<span style="color:#a5d6ff">0</span>), UPDATE_INTERVAL)
</span></span><span style="display:flex;"><span>	<span style="color:#d2a8ff;font-weight:bold">addChild</span>(fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">node</span>())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8b949e;font-style:italic">### In res://src/FrameRate.gd</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">var</span> label: <span style="color:#f0883e;font-weight:bold">Node</span>:
</span></span><span style="display:flex;"><span>	get: <span style="color:#ff7b72">return</span> label
</span></span><span style="display:flex;"><span>	<span style="color:#d2a8ff;font-weight:bold">set</span>(value): label <span style="color:#ff7b72;font-weight:bold">=</span> value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_init</span>(n: <span style="color:#f0883e;font-weight:bold">Node</span>, pos: <span style="color:#f0883e;font-weight:bold">Vector2</span>, i: <span style="color:#ff7b72">int</span>):
</span></span><span style="display:flex;"><span>	label <span style="color:#ff7b72;font-weight:bold">=</span> n
</span></span><span style="display:flex;"><span>	label<span style="color:#ff7b72;font-weight:bold">.</span>position <span style="color:#ff7b72;font-weight:bold">=</span> pos
</span></span><span style="display:flex;"><span>	interval <span style="color:#ff7b72;font-weight:bold">=</span> i
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">node</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#f0883e;font-weight:bold">Node</span>: <span style="color:#ff7b72">return</span> label
</span></span></code></pre></div><p><code>Pong</code> creates either a <code>Label</code> or <code>Label3D</code> and passes this object to the <code>FrameRate.New()</code> constructor. Using composition actually results in less code and one less class.</p>
<h1 id="conclusion">
  Conclusion
  <a class="heading-link" href="#conclusion">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<p>All that to display the current frame rate. If we had jumped right into the implementation we would also have had to consider loading assets, collision detection, implementing physics for ball strikes and bounces, sound effects, and player point scores for game start and game over. Never mind some rudimentary AI if we want to support single player mode against a computer opponent.</p>
<p>We will need to do all this anyway, but trying to implement all of that, while learning GDScript, while learning how the Godot engine works is a lot to bite off.</p>
<p>See <a href="#the-final-code" >The Final Code</a> for the implementation.</p>
<h2 id="the-final-code">
  The Final Code
  <a class="heading-link" href="#the-final-code">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p><code>res://src/Pong.gd</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">class_name</span> <span style="color:#f0883e;font-weight:bold">Pong</span> <span style="color:#ff7b72">extends</span> <span style="color:#f0883e;font-weight:bold">Node</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">const</span> MAX_FPS <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#a5d6ff">30</span> <span style="color:#8b949e;font-style:italic"># Zero means use the maximum frame rate</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">const</span> UPDATE_INTERVAL <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#a5d6ff">10</span> <span style="color:#8b949e;font-style:italic"># Update the frames per second every ten frames.</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">const</span> FPS_TEXT <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#a5d6ff">&#34;FPS: &#34;</span> <span style="color:#8b949e;font-style:italic"># Constant prefix displayed with the current fps, e.g. &#34;FPS: 60&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">const</span> ACTION_UI_CANCEL <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#a5d6ff">&#34;ui_cancel&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">var</span> fps: FrameRate
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_ready</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">set_max_fps</span>(MAX_FPS)
</span></span><span style="display:flex;"><span>	fps <span style="color:#ff7b72;font-weight:bold">=</span> FrameRate<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>(<span style="color:#f0883e;font-weight:bold">Label</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">new</span>(), <span style="color:#f0883e;font-weight:bold">Vector2</span>(<span style="color:#a5d6ff">0</span>,<span style="color:#a5d6ff">0</span>), UPDATE_INTERVAL)
</span></span><span style="display:flex;"><span>	<span style="color:#d2a8ff;font-weight:bold">addChild</span>(fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">node</span>())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_process</span>(_delta: <span style="color:#ff7b72">float</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">if</span> <span style="color:#f0883e;font-weight:bold">Input</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">is_action_pressed</span>(ACTION_UI_CANCEL): <span style="color:#d2a8ff;font-weight:bold">exitGame</span>()
</span></span><span style="display:flex;"><span>	fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">update</span>(<span style="color:#f0883e;font-weight:bold">Engine</span><span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_frames_per_second</span>())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">exitGame</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	self<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_tree</span>()<span style="color:#ff7b72;font-weight:bold">.</span>root<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">propagate_notification</span>(NOTIFICATION_WM_CLOSE_REQUEST)
</span></span><span style="display:flex;"><span>	self<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">get_tree</span>()<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">quit</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_finalize</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	fps<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">call_deferred</span>(<span style="color:#a5d6ff">&#34;free&#34;</span>) <span style="color:#8b949e;font-style:italic"># Because we added the label, we also need to delete it</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">addChild</span>(n: <span style="color:#f0883e;font-weight:bold">Node</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	self<span style="color:#ff7b72;font-weight:bold">.</span><span style="color:#d2a8ff;font-weight:bold">call_deferred</span>(<span style="color:#a5d6ff">&#34;add_child&#34;</span>, n)
</span></span></code></pre></div><p><code>res://src/FrameRate.gd</code></p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-gdscript" data-lang="gdscript"><span style="display:flex;"><span><span style="color:#ff7b72">class_name</span> <span style="color:#f0883e;font-weight:bold">FrameRate</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">var</span> label: <span style="color:#f0883e;font-weight:bold">Label</span>:
</span></span><span style="display:flex;"><span>	get: <span style="color:#ff7b72">return</span> label
</span></span><span style="display:flex;"><span>	<span style="color:#d2a8ff;font-weight:bold">set</span>(value): label <span style="color:#ff7b72;font-weight:bold">=</span> value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">var</span> interval: <span style="color:#ff7b72">int</span>: <span style="color:#8b949e;font-style:italic"># Update the fps at interval</span>
</span></span><span style="display:flex;"><span>	<span style="color:#d2a8ff;font-weight:bold">set</span>(value): interval <span style="color:#ff7b72;font-weight:bold">=</span> value
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">_init</span>(l: <span style="color:#f0883e;font-weight:bold">Node</span>, pos: <span style="color:#f0883e;font-weight:bold">Vector2</span>, i: <span style="color:#ff7b72">int</span>):
</span></span><span style="display:flex;"><span>	<span style="color:#8b949e;font-style:italic"># Create the label in _init() as FrameRate is not added to</span>
</span></span><span style="display:flex;"><span>	<span style="color:#8b949e;font-style:italic"># the SceneTree hence _ready() is not called.</span>
</span></span><span style="display:flex;"><span>	label <span style="color:#ff7b72;font-weight:bold">=</span> l
</span></span><span style="display:flex;"><span>	label<span style="color:#ff7b72;font-weight:bold">.</span>position <span style="color:#ff7b72;font-weight:bold">=</span> pos
</span></span><span style="display:flex;"><span>	interval <span style="color:#ff7b72;font-weight:bold">=</span> i
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">update</span>(frames: <span style="color:#ff7b72">float</span>) <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#ff7b72">void</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#ff7b72">if</span> <span style="color:#ff7b72">int</span>(ceil(frames)) <span style="color:#ff7b72;font-weight:bold">%</span> interval <span style="color:#ff7b72;font-weight:bold">==</span> <span style="color:#a5d6ff">0</span>:
</span></span><span style="display:flex;"><span>		label<span style="color:#ff7b72;font-weight:bold">.</span>text <span style="color:#ff7b72;font-weight:bold">=</span> <span style="color:#a5d6ff">&#34;FPS: &#34;</span> <span style="color:#ff7b72;font-weight:bold">+</span> str(frames)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff7b72">func</span> <span style="color:#d2a8ff;font-weight:bold">node</span>() <span style="color:#ff7b72;font-weight:bold">-&gt;</span> <span style="color:#f0883e;font-weight:bold">Node</span>: <span style="color:#ff7b72">return</span> label
</span></span></code></pre></div><h1 id="advanced-concepts">
  Advanced Concepts
  <a class="heading-link" href="#advanced-concepts">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<ul>
<li>
<p>It is possible to <a href="https://docs.godotengine.org/en/stable/tutorials/best_practices/node_alternatives.html"  class="external-link" target="_blank" rel="noopener">define your own lightweight Nodes</a>. We mention this but an example is too advanced for this tutorial.</p>
</li>
<li>
<p>The <a href="https://docs.godotengine.org/en/stable/classes/class_object.html#class-object"  class="external-link" target="_blank" rel="noopener">Godot class Object</a></p>
</li>
</ul>
<h1 id="versions">
  Versions
  <a class="heading-link" href="#versions">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<ul>
<li>0.1 &ndash; Initial.</li>
</ul>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->

      </div>


      <footer>
        


        
        
        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2003 -
    
    2024
     Luke Crook 
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
